!function(t,e){function n(e){t.extend(!0,mt,e)}function r(n,r,c){function u(){I=r.theme?"ui":"fc",n.addClass("fc"),r.isRTL?n.addClass("fc-rtl"):n.addClass("fc-ltr"),r.theme&&n.addClass("ui-widget"),j=t("<div class='fc-content' style='position:relative'/>").prependTo(n),Y=new a(P,r),(B=Y.render())&&n.prepend(B),p(r.defaultView),r.handleWindowResize&&t(window).resize(S),h()||f()}function f(){setTimeout(function(){!q.start&&h()&&y()},0)}function v(){return n.is(":visible")}function h(){return t("body").is(":visible")}function p(t){q&&t==q.name||m(t)}function m(e){Q++,q&&(_("viewDestroy",q,q,q.element),W(),q.triggerEventDestroy(),O(),q.element.remove(),Y.deactivateButton(q.name)),Y.activateButton(e),q=new Dt[e](t("<div class='fc-view fc-view-"+e+"' style='position:relative'/>").appendTo(j),P),y(),L(),Q--}function y(t){(!q.start||t||K<q.start||K>=q.end)&&v()&&b(t)}function b(t){Q++,q.start&&(_("viewDestroy",q,q,q.element),W(),k()),O(),q.render(K,t||0),E(),L(),(q.afterRender||A)(),N(),z(),_("viewRender",q,q,q.element),q.trigger("viewDisplay",G),Q--,H()}function C(){v()&&(W(),k(),M(),E(),x())}function M(){J=r.contentHeight?r.contentHeight:r.height?r.height-(B?B.height():0)-R(j):Math.round(j.width()/Math.max(r.aspectRatio,.5))}function E(){J===e&&M(),Q++,q.setHeight(J),q.setWidth(j.width()),Q--,X=n.outerWidth()}function S(){if(!Q)if(q.start){var t=++$;setTimeout(function(){t==$&&!Q&&v()&&X!=(X=n.outerWidth())&&(Q++,C(),q.trigger("windowResize",G),Q--)},200)}else f()}function T(t){k(),x(t)}function x(t){v()&&(q.setEventData(tt),q.renderEvents(tt,t),q.trigger("eventAfterAllRender"))}function k(){q.triggerEventDestroy(),q.clearEvents(),q.clearEventData()}function H(){!r.lazyFetching||U(q.visStart,q.visEnd)?F():x()}function F(){Z(q.visStart,q.visEnd)}function N(){Y.updateTitle(q.title)}function z(){var t=new Date;t>=q.start&&t<q.end?Y.disableButton("today"):Y.enableButton("today")}function W(){q&&q.unselect()}function O(){j.css({width:"100%",height:j.height(),overflow:"hidden"})}function L(){j.css({width:"",height:"",overflow:""})}function _(t,e){if(r[t])return r[t].apply(e||G,Array.prototype.slice.call(arguments,2))}var P=this;P.options=r,P.render=function(t){j?v()&&(M(),b(t)):u()},P.destroy=function(){q&&(_("viewDestroy",q,q,q.element),q.triggerEventDestroy()),t(window).unbind("resize",S),Y.destroy(),j.remove(),n.removeClass("fc fc-rtl ui-widget")},P.refetchEvents=function(){k(),F()},P.reportEvents=function(t){tt=t,x()},P.reportEventChange=function(t){T(t)},P.rerenderEvents=T,P.changeView=p,P.select=function(t,n,r){q.select(t,n,r===e||r)},P.unselect=W,P.prev=function(){y(-1)},P.next=function(){y(1)},P.prevYear=function(){i(K,-1),y()},P.nextYear=function(){i(K,1),y()},P.today=function(){K=new Date,y()},P.gotoDate=function(t,e,n){t instanceof Date?K=d(t):g(K,t,e,n),y()},P.incrementDate=function(t,n,r){t!==e&&i(K,t),n!==e&&s(K,n),r!==e&&l(K,r),y()},P.formatDate=function(t,e){return w(t,e,r)},P.formatDates=function(t,e,n){return D(t,e,n,r)},P.getDate=function(){return d(K)},P.getView=function(){return q},P.option=function(t,n){if(n===e)return r[t];"height"!=t&&"contentHeight"!=t&&"aspectRatio"!=t||(r[t]=n,C())},P.trigger=_,o.call(P,r,c);var Y,B,j,I,q,X,J,V,U=P.isFetchNeeded,Z=P.fetchEvents,G=n[0],$=0,Q=0,K=new Date,tt=[];g(K,r.year,r.month,r.date),r.droppable&&t(document).bind("dragstart",function(e,n){var a=e.target,o=t(a);if(!o.parents(".fc").length){var i=r.dropAccept;(t.isFunction(i)?i.call(a,o):o.is(i))&&(V=a,q.dragStart(V,e,n))}}).bind("dragstop",function(t,e){V&&(q.dragStop(V,t,e),V=null)})}function a(e,n){function r(r){var a=t("<td class='fc-header-"+r+"'/>"),i=n.header[r];return i&&t.each(i.split(" "),function(r){r>0&&a.append("<span class='fc-header-space'/>");var i;t.each(this.split(","),function(r,s){if("title"==s)a.append("<span class='fc-header-title'><h2> </h2></span>"),i&&i.addClass(o+"-corner-right"),i=null;else{var l;if(e[s]?l=e[s]:Dt[s]&&(l=function(){f.removeClass(o+"-state-hover"),e.changeView(s)}),l){var c=n.theme?P(n.buttonIcons,s):null,u=P(n.buttonText,s),f=t("<span class='fc-button fc-button-"+s+" "+o+"-state-default'>"+(c?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+c+"'/></span>":u)+"</span>").click(function(){f.hasClass(o+"-state-disabled")||l()}).mousedown(function(){f.not("."+o+"-state-active").not("."+o+"-state-disabled").addClass(o+"-state-down")}).mouseup(function(){f.removeClass(o+"-state-down")}).hover(function(){f.not("."+o+"-state-active").not("."+o+"-state-disabled").addClass(o+"-state-hover")},function(){f.removeClass(o+"-state-hover").removeClass(o+"-state-down")}).appendTo(a);B(f),i||f.addClass(o+"-corner-left"),i=f}}}),i&&i.addClass(o+"-corner-right")}),a}var a=this;a.render=function(){if(o=n.theme?"ui":"fc",n.header)return i=t("<table class='fc-header' style='width:100%'/>").append(t("<tr/>").append(r("left")).append(r("center")).append(r("right")))},a.destroy=function(){i.remove()},a.updateTitle=function(t){i.find("h2").html(t)},a.activateButton=function(t){i.find("span.fc-button-"+t).addClass(o+"-state-active")},a.deactivateButton=function(t){i.find("span.fc-button-"+t).removeClass(o+"-state-active")},a.disableButton=function(t){i.find("span.fc-button-"+t).addClass(o+"-state-disabled")},a.enableButton=function(t){i.find("span.fc-button-"+t).removeClass(o+"-state-disabled")};var o,i=t([])}function o(n,r){function a(e,r){o(e,function(a){if(r==M){if(a){n.eventDataTransform&&(a=t.map(a,n.eventDataTransform)),e.eventDataTransform&&(a=t.map(a,e.eventDataTransform));for(var o=0;o<a.length;o++)a[o].source=e,c(a[o]);T=T.concat(a)}--E||D(T)}})}function o(e,r){var a,i,c=wt.sourceFetchers;for(a=0;a<c.length;a++){if(!0===(i=c[a](e,g,m,r)))return;if("object"==typeof i)return void o(i,r)}var u=e.events;if(u)t.isFunction(u)?(s(),u(d(g),d(m),function(t){r(t),l()})):t.isArray(u)?r(u):r();else if(e.url){var f,v=e.success,h=e.error,p=e.complete;f=t.isFunction(e.data)?e.data():e.data;var y=t.extend({},f||{}),w=X(e.startParam,n.startParam),D=X(e.endParam,n.endParam);w&&(y[w]=Math.round(+g/1e3)),D&&(y[D]=Math.round(+m/1e3)),s(),t.ajax(t.extend({},bt,e,{data:y,success:function(e){e=e||[];var n=q(v,this,arguments);t.isArray(n)&&(e=n),r(e)},error:function(){q(h,this,arguments),r()},complete:function(){q(p,this,arguments),l()}}))}else r()}function i(e){if(t.isFunction(e)||t.isArray(e)?e={events:e}:"string"==typeof e&&(e={url:e}),"object"==typeof e)return u(e),C.push(e),e}function s(){S++||y("loading",null,!0,w())}function l(){--S||y("loading",null,!1,w())}function c(t){var r=t.source||{},a=X(r.ignoreTimezone,n.ignoreTimezone);t._id=t._id||(t.id===e?"_fc"+Ct++:t.id+""),t.date&&(t.start||(t.start=t.date),delete t.date),t._start=d(t.start=p(t.start,a)),t.end=p(t.end,a),t.end&&t.end<=t.start&&(t.end=null),t._end=t.end?d(t.end):null,t.allDay===e&&(t.allDay=X(r.allDayDefault,n.allDayDefault)),t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[]}function u(t){t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[];for(var e=wt.sourceNormalizers,n=0;n<e.length;n++)e[n](t)}function f(t,e){return t&&e&&v(t)==v(e)}function v(t){return("object"==typeof t?t.events||t.url:"")||t}var h=this;h.isFetchNeeded=function(t,e){return!g||t<g||e>m},h.fetchEvents=function(t,e){g=t,m=e,T=[];var n=++M,r=C.length;E=r;for(var o=0;o<r;o++)a(C[o],n)},h.addEventSource=function(t){(t=i(t))&&(E++,a(t,M))},h.removeEventSource=function(e){C=t.grep(C,function(t){return!f(t,e)}),T=t.grep(T,function(t){return!f(t.source,e)}),D(T)},h.updateEvent=function(t){var e,n,r=T.length,a=w().defaultEventEnd,o=t.start-t._start,i=t.end?t.end-(t._end||a(t)):0;for(e=0;e<r;e++)(n=T[e])._id==t._id&&n!=t&&(n.start=new Date(+n.start+o),t.end?n.end?n.end=new Date(+n.end+i):n.end=new Date(+a(n)+i):n.end=null,n.title=t.title,n.url=t.url,n.allDay=t.allDay,n.className=t.className,n.editable=t.editable,n.color=t.color,n.backgroundColor=t.backgroundColor,n.borderColor=t.borderColor,n.textColor=t.textColor,c(n));c(t),D(T)},h.renderEvent=function(t,e){c(t),t.source||(e&&(b.events.push(t),t.source=b),T.push(t)),D(T)},h.removeEvents=function(e){if(e){if(!t.isFunction(e)){var n=e+"";e=function(t){return t._id==n}}for(T=t.grep(T,e,!0),r=0;r<C.length;r++)t.isArray(C[r].events)&&(C[r].events=t.grep(C[r].events,e,!0))}else{T=[];for(var r=0;r<C.length;r++)t.isArray(C[r].events)&&(C[r].events=[])}D(T)},h.clientEvents=function(e){return t.isFunction(e)?t.grep(T,e):e?(e+="",t.grep(T,function(t){return t._id==e})):T},h.normalizeEvent=c;for(var g,m,y=h.trigger,w=h.getView,D=h.reportEvents,b={events:[]},C=[b],M=0,E=0,S=0,T=[],x=0;x<r.length;x++)i(r[x])}function i(t,e,n){return t.setFullYear(t.getFullYear()+e),n||f(t),t}function s(t,e,n){if(+t){var r=t.getMonth()+e,a=d(t);for(a.setDate(1),a.setMonth(r),t.setMonth(r),n||f(t);t.getMonth()!=a.getMonth();)t.setDate(t.getDate()+(t<a?1:-1))}return t}function l(t,e,n){if(+t){var r=t.getDate()+e,a=d(t);a.setHours(9),a.setDate(r),t.setDate(r),n||f(t),c(t,a)}return t}function c(t,e){if(+t)for(;t.getDate()!=e.getDate();)t.setTime(+t+(t<e?1:-1)*St)}function u(t,e){return t.setMinutes(t.getMinutes()+e),t}function f(t){return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t}function d(t,e){return e?f(new Date(+t)):new Date(+t)}function v(){var t,e=0;do{t=new Date(1970,e++,1)}while(t.getHours());return t}function h(t,e){return Math.round((d(t,!0)-d(e,!0))/Et)}function g(t,n,r,a){n!==e&&n!=t.getFullYear()&&(t.setDate(1),t.setMonth(0),t.setFullYear(n)),r!==e&&r!=t.getMonth()&&(t.setDate(1),t.setMonth(r)),a!==e&&t.setDate(a)}function p(t,n){return"object"==typeof t?t:"number"==typeof t?new Date(1e3*t):"string"==typeof t?t.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(t)):(n===e&&(n=!0),m(t,n)||(t?new Date(t):null)):null}function m(t,e){var n=t.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!n)return null;var r=new Date(n[1],0,1);if(e||!n[13]){var a=new Date(n[1],0,1,9,0);n[3]&&(r.setMonth(n[3]-1),a.setMonth(n[3]-1)),n[5]&&(r.setDate(n[5]),a.setDate(n[5])),c(r,a),n[7]&&r.setHours(n[7]),n[8]&&r.setMinutes(n[8]),n[10]&&r.setSeconds(n[10]),n[12]&&r.setMilliseconds(1e3*Number("0."+n[12])),c(r,a)}else if(r.setUTCFullYear(n[1],n[3]?n[3]-1:0,n[5]||1),r.setUTCHours(n[7]||0,n[8]||0,n[10]||0,n[12]?1e3*Number("0."+n[12]):0),n[14]){var o=60*Number(n[16])+(n[18]?Number(n[18]):0);o*="-"==n[15]?1:-1,r=new Date(+r+60*o*1e3)}return r}function y(t){if("number"==typeof t)return 60*t;if("object"==typeof t)return 60*t.getHours()+t.getMinutes();var e=t.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(e){var n=parseInt(e[1],10);return e[3]&&(n%=12,"p"==e[3].toLowerCase().charAt(0)&&(n+=12)),60*n+(e[2]?parseInt(e[2],10):0)}}function w(t,e,n){return D(t,null,e,n)}function D(t,e,n,r){r=r||mt;var a,o,i,s,l=t,c=e,u=n.length,f="";for(a=0;a<u;a++)if("'"==(o=n.charAt(a))){for(i=a+1;i<u;i++)if("'"==n.charAt(i)){l&&(f+=i==a+1?"'":n.substring(a+1,i),a=i);break}}else if("("==o){for(i=a+1;i<u;i++)if(")"==n.charAt(i)){var d=w(l,n.substring(a+1,i),r);parseInt(d.replace(/\D/,""),10)&&(f+=d),a=i;break}}else if("["==o){for(i=a+1;i<u;i++)if("]"==n.charAt(i)){var v=n.substring(a+1,i);(d=w(l,v,r))!=w(c,v,r)&&(f+=d),a=i;break}}else if("{"==o)l=e,c=t;else if("}"==o)l=t,c=e;else{for(i=u;i>a;i--)if(s=xt[n.substring(a,i)]){l&&(f+=s(l,r)),a=i-1;break}i==a&&l&&(f+=o)}return f}function b(t){var e,n=new Date(t.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),e=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((e-n)/864e5)/7)+1}function C(t){return t.end?M(t.end,t.allDay):l(d(t.start),1)}function M(t,e){return t=d(t),e||t.getHours()||t.getMinutes()?l(t,1):f(t)}function E(n,r,a){n.unbind("mouseover").mouseover(function(n){for(var o,i,s,l=n.target;l!=this;)o=l,l=l.parentNode;(i=o._fci)!==e&&(o._fci=e,s=r[i],a(s.event,s.element,s),t(n.target).trigger(n)),n.stopPropagation()})}function S(e,n,r){for(var a,o=0;o<e.length;o++)(a=t(e[o])).width(Math.max(0,n-x(a,r)))}function T(e,n,r){for(var a,o=0;o<e.length;o++)(a=t(e[o])).height(Math.max(0,n-R(a,r)))}function x(t,e){return k(t)+F(t)+(e?H(t):0)}function k(e){return(parseFloat(t.css(e[0],"paddingLeft",!0))||0)+(parseFloat(t.css(e[0],"paddingRight",!0))||0)}function H(e){return(parseFloat(t.css(e[0],"marginLeft",!0))||0)+(parseFloat(t.css(e[0],"marginRight",!0))||0)}function F(e){return(parseFloat(t.css(e[0],"borderLeftWidth",!0))||0)+(parseFloat(t.css(e[0],"borderRightWidth",!0))||0)}function R(t,e){return N(t)+W(t)+(e?z(t):0)}function N(e){return(parseFloat(t.css(e[0],"paddingTop",!0))||0)+(parseFloat(t.css(e[0],"paddingBottom",!0))||0)}function z(e){return(parseFloat(t.css(e[0],"marginTop",!0))||0)+(parseFloat(t.css(e[0],"marginBottom",!0))||0)}function W(e){return(parseFloat(t.css(e[0],"borderTopWidth",!0))||0)+(parseFloat(t.css(e[0],"borderBottomWidth",!0))||0)}function A(){}function O(t,e){return t-e}function L(t){return Math.max.apply(Math,t)}function _(t){return(t<10?"0":"")+t}function P(t,n){if(t[n]!==e)return t[n];for(var r,a=n.split(/(?=[A-Z])/),o=a.length-1;o>=0;o--)if((r=t[a[o].toLowerCase()])!==e)return r;return t[""]}function Y(t){return t.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/'/g,"").replace(/"/g,'"').replace(/\n/g,"<br />")}function B(t){t.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function j(t){t.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function I(t,e){var n=t.source||{},r=t.color,a=n.color,o=e("eventColor"),i=t.backgroundColor||r||n.backgroundColor||a||e("eventBackgroundColor")||o,s=t.borderColor||r||n.borderColor||a||e("eventBorderColor")||o,l=t.textColor||n.textColor||e("eventTextColor"),c=[];return i&&c.push("background-color:"+i),s&&c.push("border-color:"+s),l&&c.push("color:"+l),c.join(";")}function q(e,n,r){if(t.isFunction(e)&&(e=[e]),e){var a,o;for(a=0;a<e.length;a++)o=e[a].apply(n,r)||o;return o}}function X(){for(var t=0;t<arguments.length;t++)if(arguments[t]!==e)return arguments[t]}function J(e,n,r){function a(){J=Q("theme")?"ui":"fc",U=Q("columnFormat"),Z=Q("weekNumbers"),G=Q("weekNumberTitle"),$="iso"!=Q("weekNumberCalculation")?"w":"W"}function o(){F=t("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(e)}function i(){var n=s();D&&D.remove(),D=t(n).appendTo(e),b=D.find("thead"),C=b.find(".fc-day-header"),M=D.find("tbody"),E=M.find("tr"),T=M.find(".fc-day"),x=E.find("td:first-child"),k=E.eq(0).find(".fc-day > div"),H=E.eq(0).find(".fc-day-content > div"),j(b.add(b.find("tr"))),j(E),E.eq(0).addClass("fc-first"),E.filter(":last").addClass("fc-last"),T.each(function(e,n){var r=rt(Math.floor(e/L),e%L);K("dayRender",w,r,t(n))}),h(T)}function s(){return"<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+c()+u()+"</table>"}function c(){var t,e,n=J+"-widget-header",r="";for(r+="<thead><tr>",Z&&(r+="<th class='fc-week-number "+n+"'>"+Y(G)+"</th>"),t=0;t<L;t++)e=rt(0,t),r+="<th class='fc-day-header fc-"+Mt[e.getDay()]+" "+n+"'>"+Y(st(e,U))+"</th>";return r+="</tr></thead>"}function u(){var t,e,n,r=J+"-widget-content",a="";for(a+="<tbody>",t=0;t<O;t++){for(a+="<tr class='fc-week'>",Z&&(n=rt(t,0),a+="<td class='fc-week-number "+r+"'><div>"+Y(st(n,$))+"</div></td>"),e=0;e<L;e++)a+=v(n=rt(t,e));a+="</tr>"}return a+="</tbody>"}function v(t){var e=J+"-widget-content",n=w.start.getMonth(),r=f(new Date),a="",o=["fc-day","fc-"+Mt[t.getDay()],e];return t.getMonth()!=n&&o.push("fc-other-month"),+t==+r?o.push("fc-today",J+"-state-highlight"):t<r?o.push("fc-past"):o.push("fc-future"),a+="<td class='"+o.join(" ")+"' data-date='"+st(t,"yyyy-MM-dd")+"'><div>",_&&(a+="<div class='fc-day-number'>"+t.getDate()+"</div>"),a+="<div class='fc-day-content'><div style='position:relative'> </div></div></div></td>"}function h(t){t.click(g).mousedown(nt)}function g(e){if(!Q("selectable")){var n=m(t(this).data("date"));K("dayClick",this,n,!0,e)}}function p(t,e,n){n&&P.build();for(var r=ot(t,e),a=0;a<r.length;a++){var o=r[a];h(y(o.row,o.leftCol,o.row,o.rightCol))}}function y(t,n,r,a){var o=P.rect(t,n,r,a,e);return tt(o,e)}var w=this;w.renderBasic=function(t,e,n){O=t,L=e,_=n,a(),M||o(),i()},w.setHeight=function(e){var n,r,a,o=(z=e)-b.height();"variable"==Q("weekMode")?n=r=Math.floor(o/(1==O?2:6)):(n=Math.floor(o/O),r=o-n*(O-1)),x.each(function(e,o){e<O&&(a=t(o)).find("> div").css("min-height",(e==O-1?r:n)-R(a))})},w.setWidth=function(t){N=t,q.clear(),X.clear(),A=0,Z&&(A=b.find("th.fc-week-number").outerWidth()),W=Math.floor((N-A)/L),S(C.slice(0,-1),W)},w.renderDayOverlay=p,w.defaultSelectionEnd=function(t,e){return d(t)},w.renderSelection=function(t,e,n){p(t,l(d(e),1),!0)},w.clearSelection=function(){et()},w.reportDayClick=function(t,e,n){var r=at(t),a=T[r.row*L+r.col];K("dayClick",a,t,e,n)},w.dragStart=function(t,e,n){I.start(function(t){et(),t&&y(t.row,t.col,t.row,t.col)},e)},w.dragStop=function(t,e,n){var r=I.stop();if(et(),r){var a=rt(r);K("drop",t,a,!0,e,n)}},w.defaultEventEnd=function(t){return d(t.start)},w.getHoverListener=function(){return I},w.colLeft=function(t){return q.left(t)},w.colRight=function(t){return q.right(t)},w.colContentLeft=function(t){return X.left(t)},w.colContentRight=function(t){return X.right(t)},w.getIsCellAllDay=function(){return!0},w.allDayRow=function(t){return E.eq(t)},w.getRowCnt=function(){return O},w.getColCnt=function(){return L},w.getColWidth=function(){return W},w.getDaySegmentContainer=function(){return F},it.call(w,e,n,r),dt.call(w),ft.call(w),V.call(w);var D,b,C,M,E,T,x,k,H,F,N,z,W,A,O,L,_,P,I,q,X,J,U,Z,G,$,Q=w.opt,K=w.trigger,tt=w.renderOverlay,et=w.clearOverlays,nt=w.daySelectionMousedown,rt=w.cellToDate,at=w.dateToCell,ot=w.rangeToSegments,st=n.formatDate;B(e.addClass("fc-grid")),P=new vt(function(e,n){var r,a,o;C.each(function(e,i){r=t(i),a=r.offset().left,e&&(o[1]=a),o=[a],n[e]=o}),o[1]=a+r.outerWidth(),E.each(function(n,i){n<O&&(r=t(i),a=r.offset().top,n&&(o[1]=a),o=[a],e[n]=o)}),o[1]=a+r.outerHeight()}),I=new ht(P),q=new pt(function(t){return k.eq(t)}),X=new pt(function(t){return H.eq(t)})}function V(){var t=this;t.renderEvents=function(e,n){t.renderDayEvents(e,n)},t.clearEvents=function(){t.getDaySegmentContainer().empty()},st.call(t)}function U(n,r,a){function o(){Tt=Wt("theme")?"ui":"fc",xt=Wt("isRTL"),kt=y(Wt("minTime")),Ht=y(Wt("maxTime")),Ft=Wt("columnFormat"),Rt=Wt("weekNumbers"),Nt=Wt("weekNumberTitle"),zt="iso"!=Wt("weekNumberCalculation")?"w":"W",gt=Wt("snapMinutes")||Wt("slotMinutes")}function i(){var e,r,a,o,i,l=Tt+"-widget-header",c=Tt+"-widget-content",f=Wt("slotMinutes")%15==0;for(s(),U=t("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(n),Wt("allDaySlot")?(G=t("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(U),e="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+l+" fc-agenda-axis'>"+Wt("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+l+" fc-agenda-gutter'> </th></tr></table>",$=t(e).appendTo(U),m((Q=$.find("tr")).find("td")),U.append("<div class='fc-agenda-divider "+l+"'><div class='fc-agenda-divider-inner'/></div>")):G=t([]),K=t("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(U),tt=t("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(K),et=t("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(tt),e="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",o=u(d(r=v()),Ht),u(r,kt),Dt=0,a=0;r<o;a++)e+="<tr class='fc-slot"+a+" "+((i=r.getMinutes())?"fc-minor":"")+"'><th class='fc-agenda-axis "+l+"'>"+(f&&i?" ":Xt(r,Wt("axisFormat")))+"</th><td class='"+c+"'><div style='position:relative'> </div></td></tr>",u(r,Wt("slotMinutes")),Dt++;w((nt=t(e+="</tbody></table>").appendTo(tt)).find("td"))}function s(){var e=c();A&&A.remove(),A=t(e).appendTo(n),L=A.find("thead"),_=L.find("th").slice(1,-1),P=A.find("tbody"),I=P.find("td").slice(0,-1),q=I.find("> div"),X=I.find(".fc-day-content > div"),J=I.eq(0),V=q.eq(0),j(L.add(L.find("tr"))),j(P.add(P.find("tr")))}function c(){return"<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+h()+g()+"</table>"}function h(){var t,e,n,r=Tt+"-widget-header",a="";for(a+="<thead><tr>",Rt?(t=jt(0,0),e=Xt(t,zt),xt?e+=Nt:e=Nt+e,a+="<th class='fc-agenda-axis fc-week-number "+r+"'>"+Y(e)+"</th>"):a+="<th class='fc-agenda-axis "+r+"'> </th>",n=0;n<wt;n++)t=jt(0,n),a+="<th class='fc-"+Mt[t.getDay()]+" fc-col"+n+" "+r+"'>"+Y(Xt(t,Ft))+"</th>";return a+="<th class='fc-agenda-gutter "+r+"'> </th></tr></thead>"}function g(){var t,e,n,r,a=Tt+"-widget-header",o=Tt+"-widget-content",i=f(new Date),s="";for(s+="<tbody><tr><th class='fc-agenda-axis "+a+"'> </th>",n="",e=0;e<wt;e++)t=jt(0,e),r=["fc-col"+e,"fc-"+Mt[t.getDay()],o],+t==+i?r.push(Tt+"-state-highlight","fc-today"):t<i?r.push("fc-past"):r.push("fc-future"),n+="<td class='"+r.join(" ")+"'><div><div class='fc-day-content'><div style='position:relative'> </div></div></div></td>";return s+=n,s+="<td class='fc-agenda-gutter "+o+"'> </td></tr></tbody>"}function p(){function t(){K.scrollTop(r)}var e=v(),n=d(e);n.setHours(Wt("firstHour"));var r=k(e,n)+1;t(),setTimeout(t,0)}function m(t){t.click(D).mousedown(Yt)}function w(t){t.click(D).mousedown(N)}function D(t){if(!Wt("selectable")){var e=Math.min(wt-1,Math.floor((t.pageX-A.offset().left-st)/lt)),n=jt(0,e),r=this.parentNode.className.match(/fc-slot(\d+)/);if(r){var a=parseInt(r[1])*Wt("slotMinutes"),o=Math.floor(a/60);n.setHours(o),n.setMinutes(a%60+kt),At("dayClick",I[e],n,!1,t)}else At("dayClick",I[e],n,!0,t)}}function b(t,e,n){n&&bt.build();for(var r=qt(t,e),a=0;a<r.length;a++){var o=r[a];m(C(o.row,o.leftCol,o.row,o.rightCol))}}function C(t,e,n,r){var a=bt.rect(t,e,n,r,U);return Ot(a,U)}function M(t,e){for(var n=0;n<wt;n++){var r=jt(0,n),a=l(d(r),1),o=new Date(Math.max(r,t)),i=new Date(Math.min(a,e));if(o<i){var s=bt.rect(0,n,0,n,tt),c=k(r,o),u=k(r,i);s.top=c,s.height=u-c,w(Ot(s,tt))}}}function E(t){return Wt("allDaySlot")&&!t.row}function x(t){var e=jt(0,t.col),n=t.row;return Wt("allDaySlot")&&n--,n>=0&&u(e,kt+n*gt),e}function k(t,n){if(t=d(t,!0),n<u(d(t),kt))return 0;if(n>=u(d(t),Ht))return nt.height();var r=Wt("slotMinutes"),a=60*n.getHours()+n.getMinutes()-kt,o=Math.floor(a/r),i=Jt[o];return i===e&&(i=Jt[o]=nt.find("tr").eq(o).find("td div")[0].offsetTop),Math.max(0,Math.round(i-1+ut*(a%r/r)))}function H(e,n){var r=Wt("selectHelper");if(bt.build(),r){var a=It(e).col;if(a>=0&&a<wt){var o=bt.rect(0,a,0,a,tt),i=k(e,e),s=k(e,n);if(s>i){if(o.top=i,o.height=s-i,o.left+=2,o.width-=5,t.isFunction(r)){var l=r(e,n);l&&(o.position="absolute",rt=t(l).css(o).appendTo(tt))}else o.isStart=!0,o.isEnd=!0,(rt=t(Bt({title:"",start:e,end:n,className:["fc-select-helper"],editable:!1},o))).css("opacity",Wt("dragOpacity"));rt&&(w(rt),tt.append(rt),S(rt,o.width,!0),T(rt,o.height,!0))}}}else M(e,n)}function F(){Lt(),rt&&(rt.remove(),rt=null)}function N(e){if(1==e.which&&Wt("selectable")){Pt(e);var n;Ct.start(function(t,e){if(F(),t&&t.col==e.col&&!E(t)){var r=x(e),a=x(t);H((n=[r,u(d(r),gt),a,u(d(a),gt)].sort(O))[0],n[3])}else n=null},e),t(document).one("mouseup",function(t){Ct.stop(),n&&(+n[0]==+n[1]&&z(n[0],!1,t),_t(n[0],n[3],!1,t))})}}function z(t,e,n){At("dayClick",I[It(t).col],t,e,n)}var W=this;W.renderAgenda=function(t){wt=t,o(),A?s():i()},W.setWidth=function(e){at=e,Et.clear(),St.clear();var n=L.find("th:first");$&&(n=n.add($.find("th:first"))),n=n.add(nt.find("th:first")),st=0,S(n.width("").each(function(e,n){st=Math.max(st,t(n).outerWidth())}),st);var r=A.find(".fc-agenda-gutter");$&&(r=r.add($.find("th.fc-agenda-gutter")));var a=K[0].clientWidth;(ct=K.width()-a)?(S(r,ct),r.show().prev().removeClass("fc-last")):r.hide().prev().addClass("fc-last"),lt=Math.floor((a-st)/wt),S(_.slice(0,-1),lt)},W.setHeight=function(t){t===e&&(t=ot),ot=t,Jt={};var n=P.position().top,r=K.position().top,a=Math.min(t-n,nt.height()+r+1);V.height(a-R(J)),U.css("top",n),K.height(a-r-1),ut=nt.find("tr:first").height()+1,mt=Wt("slotMinutes")/gt,yt=ut/mt},W.afterRender=function(){p()},W.defaultEventEnd=function(t){var e=d(t.start);return t.allDay?e:u(e,Wt("defaultEventMinutes"))},W.timePosition=k,W.getIsCellAllDay=E,W.allDayRow=function(t){return Q},W.getCoordinateGrid=function(){return bt},W.getHoverListener=function(){return Ct},W.colLeft=function(t){return Et.left(t)},W.colRight=function(t){return Et.right(t)},W.colContentLeft=function(t){return St.left(t)},W.colContentRight=function(t){return St.right(t)},W.getDaySegmentContainer=function(){return G},W.getSlotSegmentContainer=function(){return et},W.getMinMinute=function(){return kt},W.getMaxMinute=function(){return Ht},W.getSlotContainer=function(){return tt},W.getRowCnt=function(){return 1},W.getColCnt=function(){return wt},W.getColWidth=function(){return lt},W.getSnapHeight=function(){return yt},W.getSnapMinutes=function(){return gt},W.defaultSelectionEnd=function(t,e){return e?d(t):u(d(t),Wt("slotMinutes"))},W.renderDayOverlay=b,W.renderSelection=function(t,e,n){n?Wt("allDaySlot")&&b(t,l(d(e),1),!0):H(t,e)},W.clearSelection=F,W.reportDayClick=z,W.dragStart=function(t,e,n){Ct.start(function(t){if(Lt(),t)if(E(t))C(t.row,t.col,t.row,t.col);else{var e=x(t);M(e,u(d(e),Wt("defaultEventMinutes")))}},e)},W.dragStop=function(t,e,n){var r=Ct.stop();Lt(),r&&At("drop",t,x(r),E(r),e,n)},it.call(W,n,r,a),dt.call(W),ft.call(W),Z.call(W);var A,L,_,P,I,q,X,J,V,U,G,$,Q,K,tt,et,nt,rt,at,ot,st,lt,ct,ut,gt,mt,yt,wt,Dt,bt,Ct,Et,St,Tt,xt,kt,Ht,Ft,Rt,Nt,zt,Wt=W.opt,At=W.trigger,Ot=W.renderOverlay,Lt=W.clearOverlays,_t=W.reportSelection,Pt=W.unselect,Yt=W.daySelectionMousedown,Bt=W.slotSegHtml,jt=W.cellToDate,It=W.dateToCell,qt=W.rangeToSegments,Xt=r.formatDate,Jt={};B(n.addClass("fc-agenda")),bt=new vt(function(e,n){function r(t){return Math.max(l,Math.min(c,t))}var a,o,i;_.each(function(e,r){a=t(r),o=a.offset().left,e&&(i[1]=o),i=[o],n[e]=i}),i[1]=o+a.outerWidth(),Wt("allDaySlot")&&(o=(a=Q).offset().top,e[0]=[o,o+a.outerHeight()]);for(var s=tt.offset().top,l=K.offset().top,c=l+K.outerHeight(),u=0;u<Dt*mt;u++)e.push([r(s+yt*u),r(s+yt*(u+1))])}),Ct=new ht(bt),Et=new pt(function(t){return q.eq(t)}),St=new pt(function(t){return X.eq(t)})}function Z(){function n(e){var n,o,i,s,l,c=L(),f=F(),v=H(),h=t.map(e,a),g=[];for(o=0;o<c;o++)for(u(n=O(0,o),f),l=G(l=r(e,h,n,u(d(n),v-f))),i=0;i<l.length;i++)(s=l[i]).col=o,g.push(s);return g}function r(t,e,n,r){var a,o,i,s,l,c,u,f,v=[],h=t.length;for(a=0;a<h;a++)i=(o=t[a]).start,(s=e[a])>n&&i<r&&(i<n?(l=d(n),u=!1):(l=i,u=!0),s>r?(c=d(r),f=!1):(c=s,f=!0),v.push({event:o,start:l,end:c,isStart:u,isEnd:f}));return v.sort(ot)}function a(t){return t.end?d(t.end):u(d(t.start),g("defaultEventMinutes"))}function o(n,r){var a,o,l,c,u,f,d,v,h,m,y,w,D,b,C,M,T=n.length,k="",H=S(),F=g("isRTL");for(a=0;a<T;a++)l=(o=n[a]).event,c=N(o.start,o.start),u=N(o.start,o.end),f=W(o.col),d=A(o.col),h=(v=(d-=.025*(v=d-f))-f)*(o.forwardCoord-o.backwardCoord),g("slotEventOverlap")&&(h=Math.max(2*(h-10),h)),F?m=(y=d-o.backwardCoord*v)-h:y=(m=f+o.backwardCoord*v)+h,m=Math.max(m,f),h=(y=Math.min(y,d))-m,o.top=c,o.left=m,o.outerWidth=h,o.outerHeight=u-c,k+=i(l,o);for(H[0].innerHTML=k,w=H.children(),a=0;a<T;a++)l=(o=n[a]).event,D=t(w[a]),!1===(b=p("eventRender",l,l,D))?D.remove():(b&&!0!==b&&(D.remove(),D=t(b).css({position:"absolute",top:o.top,left:o.left}).appendTo(H)),o.element=D,l._id===r?s(l,D,o):D[0]._fci=a,q(l,D));for(E(H,n,s),a=0;a<T;a++)(D=(o=n[a]).element)&&(o.vsides=R(D,!0),o.hsides=x(D,!0),(C=D.find(".fc-event-title")).length&&(o.contentTop=C[0].offsetTop));for(a=0;a<T;a++)(D=(o=n[a]).element)&&(D[0].style.width=Math.max(0,o.outerWidth-o.hsides)+"px",M=Math.max(0,o.outerHeight-o.vsides),D[0].style.height=M+"px",l=o.event,o.contentTop!==e&&M-o.contentTop<10&&(D.find("div.fc-event-time").text(tt(l.start,g("timeFormat"))+" - "+l.title),D.find("div.fc-event-title").remove()),p("eventAfterRender",l,l,D))}function i(t,e){var n="<",r=t.url,a=I(t,g),o=["fc-event","fc-event-vert"];return m(t)&&o.push("fc-event-draggable"),e.isStart&&o.push("fc-event-start"),e.isEnd&&o.push("fc-event-end"),o=o.concat(t.className),t.source&&(o=o.concat(t.source.className||[])),n+=r?"a href='"+Y(t.url)+"'":"div",n+=" class='"+o.join(" ")+"' style='position:absolute;top:"+e.top+"px;left:"+e.left+"px;"+a+"'><div class='fc-event-inner'><div class='fc-event-time'>"+Y(et(t.start,t.end,g("timeFormat")))+"</div><div class='fc-event-title'>"+Y(t.title||"")+"</div></div><div class='fc-event-bg'></div>",e.isEnd&&y(t)&&(n+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),n+="</"+(r?"a":"div")+">"}function s(t,e,n){var r=e.find("div.fc-event-time");m(t)&&c(t,e,r),n.isEnd&&y(t)&&f(t,e,r),D(t,e)}function c(t,e,n){function r(){$(),s&&(f?(n.hide(),e.draggable("option","grid",null),Z(l(d(t.start),D),l(C(t),D))):(a(b),n.css("display",""),e.draggable("option","grid",[T,x])))}function a(e){var r,a=u(d(t.start),e);t.end&&(r=u(d(t.end),e)),n.text(et(a,r,g("timeFormat")))}var o,i,s,c,f,m,y,w,D,b,M,E=v.getCoordinateGrid(),S=L(),T=_(),x=P(),k=B();e.draggable({scroll:!1,grid:[T,x],axis:1==S&&"y",opacity:g("dragOpacity"),revertDuration:g("dragRevertDuration"),start:function(n,r){p("eventDragStart",e,t,n,r),J(t,e),E.build(),o=e.position(),i=E.cell(n.pageX,n.pageY),s=c=!0,f=m=z(i),y=w=0,D=0,b=M=0},drag:function(t,n){var a=E.cell(t.pageX,t.pageY);if(s=!!a){if(f=z(a),(y=Math.round((n.position.left-o.left)/T))!=w){var l=O(0,i.col),u=i.col+y;u=Math.max(0,u),u=Math.min(S-1,u);var d=O(0,u);D=h(d,l)}f||(b=Math.round((n.position.top-o.top)/x)*k)}s==c&&f==m&&y==w&&b==M||(r(),c=s,m=f,w=y,M=b),e.draggable("option","revert",!s)},stop:function(n,a){$(),p("eventDragStop",e,t,n,a),s&&(f||D||b)?V(this,t,D,f?0:b,f,n,a):(s=!0,f=!1,y=0,D=0,b=0,r(),e.css("filter",""),e.css(o),X(t,e))}})}function f(t,e,n){var r,a,o=P(),i=B();e.resizable({handles:{s:".ui-resizable-handle"},grid:o,start:function(n,o){r=a=0,J(t,e),p("eventResizeStart",this,t,n,o)},resize:function(s,l){(r=Math.round((Math.max(o,e.height())-l.originalSize.height)/o))!=a&&(n.text(et(t.start,r||t.end?u(w(t),i*r):null,g("timeFormat"))),a=r)},stop:function(n,a){p("eventResizeStop",this,t,n,a),r?U(this,t,0,i*r,n,a):X(t,e)}})}var v=this;v.renderEvents=function(t,e){var r,a=t.length,i=[],s=[];for(r=0;r<a;r++)t[r].allDay?i.push(t[r]):s.push(t[r]);g("allDaySlot")&&(Q(i,e),b()),o(n(s),e)},v.clearEvents=function(){M().empty(),S().empty()},v.slotSegHtml=i,st.call(v);var g=v.opt,p=v.trigger,m=v.isEventDraggable,y=v.isEventResizable,w=v.eventEnd,D=v.eventElementHandlers,b=v.setHeight,M=v.getDaySegmentContainer,S=v.getSlotSegmentContainer,k=v.getHoverListener,H=v.getMaxMinute,F=v.getMinMinute,N=v.timePosition,z=v.getIsCellAllDay,W=v.colContentLeft,A=v.colContentRight,O=v.cellToDate,L=v.getColCnt,_=v.getColWidth,P=v.getSnapHeight,B=v.getSnapMinutes,j=v.getSlotContainer,q=v.reportEventElement,X=v.showEvents,J=v.hideEvents,V=v.eventDrop,U=v.eventResize,Z=v.renderDayOverlay,$=v.clearOverlays,Q=v.renderDayEvents,K=v.calendar,tt=K.formatDate,et=K.formatDates;v.draggableDayEvent=function(t,e,n){function r(){c||(e.width(a).height("").draggable("option","grid",null),c=!0)}var a,o,i,s=n.isStart,c=!0,u=k(),f=_(),v=P(),m=B(),y=F();e.draggable({opacity:g("dragOpacity","month"),revertDuration:g("dragRevertDuration"),start:function(n,y){p("eventDragStart",e,t,n,y),J(t,e),a=e.width(),u.start(function(n,a){if($(),n){o=!1;var u=O(0,a.col),p=O(0,n.col);i=h(p,u),n.row?s?c&&(e.width(f-10),T(e,v*Math.round((t.end?(t.end-t.start)/Tt:g("defaultEventMinutes"))/m)),e.draggable("option","grid",[f,1]),c=!1):o=!0:(Z(l(d(t.start),i),l(C(t),i)),r()),o=o||c&&!i}else r(),o=!0;e.draggable("option","revert",o)},n,"drag")},stop:function(n,a){if(u.stop(),$(),p("eventDragStop",e,t,n,a),o)r(),e.css("filter",""),X(t,e);else{var s=0;c||(s=Math.round((e.offset().top-j().offset().top)/v)*m+y-(60*t.start.getHours()+t.start.getMinutes())),V(this,t,i,s,c,n,a)}}})}}function G(t){var e,n=$(t),r=n[0];if(Q(n),r){for(e=0;e<r.length;e++)K(r[e]);for(e=0;e<r.length;e++)tt(r[e],0,0)}return et(n)}function $(t){var e,n,r,a=[];for(e=0;e<t.length;e++){for(n=t[e],r=0;r<a.length&&nt(n,a[r]).length;r++);(a[r]||(a[r]=[])).push(n)}return a}function Q(t){var e,n,r,a,o;for(e=0;e<t.length;e++)for(n=t[e],r=0;r<n.length;r++)for((a=n[r]).forwardSegs=[],o=e+1;o<t.length;o++)nt(a,t[o],a.forwardSegs)}function K(t){var n,r,a=t.forwardSegs,o=0;if(t.forwardPressure===e){for(n=0;n<a.length;n++)K(r=a[n]),o=Math.max(o,1+r.forwardPressure);t.forwardPressure=o}}function tt(t,n,r){var a,o=t.forwardSegs;if(t.forwardCoord===e)for(o.length?(o.sort(at),tt(o[0],n+1,r),t.forwardCoord=o[0].backwardCoord):t.forwardCoord=1,t.backwardCoord=t.forwardCoord-(t.forwardCoord-r)/(n+1),a=0;a<o.length;a++)tt(o[a],0,t.forwardCoord)}function et(t){var e,n,r,a=[];for(e=0;e<t.length;e++)for(n=t[e],r=0;r<n.length;r++)a.push(n[r]);return a}function nt(t,e,n){n=n||[];for(var r=0;r<e.length;r++)rt(t,e[r])&&n.push(e[r]);return n}function rt(t,e){return t.end>e.start&&t.start<e.end}function at(t,e){return e.forwardPressure-t.forwardPressure||(t.backwardCoord||0)-(e.backwardCoord||0)||ot(t,e)}function ot(t,e){return t.start-e.start||e.end-e.start-(t.end-t.start)||(t.event.title||"").localeCompare(e.event.title)}function it(n,r,a){function o(e,n){var r=k[e];return t.isPlainObject(r)?P(r,n||a):r}function i(t,e){return r.trigger.apply(r,[t,e||b].concat(Array.prototype.slice.call(arguments,2),[b]))}function s(t){return t.end?d(t.end):C(t)}function c(t,e,n){var r,a=T[t._id],o=a.length;for(r=0;r<o;r++)e&&a[r][0]==e[0]||a[r][n]()}function f(t,n,r,a){r=r||0;for(var o,i=t.length,s=0;s<i;s++)o=t[s],a!==e&&(o.allDay=a),u(l(o.start,n,!0),r),o.end&&(o.end=u(l(o.end,n,!0),r)),M(o,k)}function v(t,e,n){n=n||0;for(var r,a=t.length,o=0;o<a;o++)(r=t[o]).end=u(l(s(r),e,!0),n),M(r,k)}function g(t,e){var n=b.getColCnt(),r=W?-1:1,a=W?n-1:0;return"object"==typeof t&&(e=t.col,t=t.row),t*n+(e*r+a)}function p(t){var e=b.visStart.getDay();return t+=N[e],7*Math.floor(t/H)+z[(t%H+H)%H]-e}function m(t){var e=d(b.visStart);return l(e,t),e}function y(t){return h(t,b.visStart)}function w(t){var e=b.visStart.getDay();return t+=e,Math.floor(t/7)*H+N[(t%7+7)%7]-N[e]}function D(t){var e=b.getColCnt(),n=W?-1:1,r=W?e-1:0;return{row:Math.floor(t/e),col:(t%e+e)%e*n+r}}var b=this;b.element=n,b.calendar=r,b.name=a,b.opt=o,b.trigger=i,b.isEventDraggable=function(t){var e=t.source||{};return X(t.startEditable,e.startEditable,o("eventStartEditable"),t.editable,e.editable,o("editable"))&&!o("disableDragging")},b.isEventResizable=function(t){var e=t.source||{};return X(t.durationEditable,e.durationEditable,o("eventDurationEditable"),t.editable,e.editable,o("editable"))&&!o("disableResizing")},b.setEventData=function(t){S={};var e,n,r=t.length;for(e=0;e<r;e++)n=t[e],S[n._id]?S[n._id].push(n):S[n._id]=[n]},b.clearEventData=function(){S={},T={},x=[]},b.eventEnd=s,b.reportEventElement=function(t,e){x.push({event:t,element:e}),T[t._id]?T[t._id].push(e):T[t._id]=[e]},b.triggerEventDestroy=function(){t.each(x,function(t,e){b.trigger("eventDestroy",e.event,e.event,e.element)})},b.eventElementHandlers=function(t,e){e.click(function(n){if(!e.hasClass("ui-draggable-dragging")&&!e.hasClass("ui-resizable-resizing"))return i("eventClick",this,t,n)}).hover(function(e){i("eventMouseover",this,t,e)},function(e){i("eventMouseout",this,t,e)})},b.showEvents=function(t,e){c(t,e,"show")},b.hideEvents=function(t,e){c(t,e,"hide")},b.eventDrop=function(t,e,n,r,a,o,s){var l=e.allDay,c=e._id;f(S[c],n,r,a),i("eventDrop",t,e,n,r,a,function(){f(S[c],-n,-r,l),E(c)},o,s),E(c)},b.eventResize=function(t,e,n,r,a,o){var s=e._id;v(S[s],n,r),i("eventResize",t,e,n,r,function(){v(S[s],-n,-r),E(s)},a,o),E(s)};var C=b.defaultEventEnd,M=r.normalizeEvent,E=r.reportEventChange,S={},T={},x=[],k=r.options;b.isHiddenDay=function(t){return"object"==typeof t&&(t=t.getDay()),R[t]},b.skipHiddenDays=function(t,e,n){for(e=e||1;R[(t.getDay()+(n?e:0)+7)%7];)l(t,e)},b.getCellsPerWeek=function(){return H},b.dateToCell=function(t){return D(w(y(t)))},b.dateToDayOffset=y,b.dayOffsetToCellOffset=w,b.cellOffsetToCell=D,b.cellToDate=function(){return m(p(g.apply(null,arguments)))},b.cellToCellOffset=g,b.cellOffsetToDayOffset=p,b.dayOffsetToDate=m,b.rangeToSegments=function(t,e){for(var n=b.getRowCnt(),r=b.getColCnt(),a=[],o=y(t),i=y(e),s=w(o),l=w(i)-1,c=0;c<n;c++){var u=c*r,f=u+r-1,d=Math.max(s,u),v=Math.min(l,f);if(d<=v){var h=D(d),g=D(v),m=[h.col,g.col].sort(),C=p(d)==o,M=p(v)+1==i;a.push({row:c,leftCol:m[0],rightCol:m[1],isStart:C,isEnd:M})}}return a};var H,F=o("hiddenDays")||[],R=[],N=[],z=[],W=o("isRTL");!function(){!1===o("weekends")&&F.push(0,6);for(var e=0,n=0;e<7;e++)N[e]=n,R[e]=-1!=t.inArray(e,F),R[e]||(z[n]=e,n++);if(!(H=n))throw"invalid hiddenDays"}()}function st(){function e(t,e,r){var a=[];return ct(n([t],!0,!1),function(t,n){t.row===e&&n.css("top",r),a.push(n[0])}),a}function n(e,n,a){var s,l,f=J(),d=n?t("<div/>"):f,v=r(e);return o(v),s=i(v),d[0].innerHTML=s,l=d.children(),n&&f.append(l),c(v,l),ct(v,function(t,e){t.hsides=x(e,!0)}),ct(v,function(t,e){e.width(Math.max(0,t.outerWidth-t.hsides))}),ct(v,function(t,e){t.outerHeight=e.outerHeight(!0)}),u(v,a),v}function r(t){for(var e=[],n=0;n<t.length;n++){var r=a(t[n]);e.push.apply(e,r)}return e}function a(t){for(var e=t.start,n=C(t),r=Q(e,n),a=0;a<r.length;a++)r[a].event=t;return r}function o(t){for(var e=b("isRTL"),n=0;n<t.length;n++){var r=t[n],a=(e?r.isEnd:r.isStart)?q:P,o=(e?r.isStart:r.isEnd)?X:j,i=a(r.leftCol),s=o(r.rightCol);r.left=i,r.outerWidth=s-i}}function i(t){for(var e="",n=0;n<t.length;n++)e+=s(t[n]);return e}function s(t){var e="",n=b("isRTL"),r=t.event,a=r.url,o=["fc-event","fc-event-hori"];S(r)&&o.push("fc-event-draggable"),t.isStart&&o.push("fc-event-start"),t.isEnd&&o.push("fc-event-end"),o=o.concat(r.className),r.source&&(o=o.concat(r.source.className||[]));var i=I(r,b);return e+=a?"<a href='"+Y(a)+"'":"<div",e+=" class='"+o.join(" ")+"' style='position:absolute;left:"+t.left+"px;"+i+"'><div class='fc-event-inner'>",!r.allDay&&t.isStart&&(e+="<span class='fc-event-time'>"+Y(V(r.start,r.end,b("timeFormat")))+"</span>"),e+="<span class='fc-event-title'>"+Y(r.title||"")+"</span></div>",t.isEnd&&T(r)&&(e+="<div class='ui-resizable-handle ui-resizable-"+(n?"w":"e")+"'>   </div>"),e+="</"+(a?"a":"div")+">"}function c(e,n){for(var r=0;r<e.length;r++){var a=e[r],o=a.event,i=n.eq(r),s=M("eventRender",o,o,i);!1===s?i.remove():(s&&!0!==s&&(s=t(s).css({position:"absolute",left:a.left}),i.replaceWith(s),i=s),a.element=i)}}function u(t,e){var n=f(t),r=m(),a=[];if(e)for(o=0;o<r.length;o++)r[o].height(n[o]);for(var o=0;o<r.length;o++)a.push(r[o].position().top);ct(t,function(t,e){e.css("top",a[t.row]+t.top)})}function f(t){for(var e=A(),n=O(),r=[],a=v(t),o=0;o<e;o++){for(var i=a[o],s=[],l=0;l<n;l++)s.push(0);for(var c=0;c<i.length;c++){var u=i[c];u.top=L(s.slice(u.leftCol,u.rightCol+1));for(l=u.leftCol;l<=u.rightCol;l++)s[l]=u.top+u.outerHeight}r.push(L(s))}return r}function v(t){var e,n,r,a=A(),o=[];for(e=0;e<t.length;e++)r=(n=t[e]).row,n.element&&(o[r]?o[r].push(n):o[r]=[n]);for(r=0;r<a;r++)o[r]=g(o[r]||[]);return o}function g(t){for(var e=[],n=p(t),r=0;r<n.length;r++)e.push.apply(e,n[r]);return e}function p(t){t.sort(ut);for(var e=[],n=0;n<t.length;n++){for(var r=t[n],a=0;a<e.length&&lt(r,e[a]);a++);e[a]?e[a].push(r):e[a]=[r]}return e}function m(){var t,e=A(),n=[];for(t=0;t<e;t++)n[t]=_(t).find("div.fc-day-content > div");return n}function y(t,e){var n=J();ct(t,function(t,n,r){var a=t.event;a._id===e?w(a,n,t):n[0]._fci=r}),E(n,t,w)}function w(t,e,n){S(t)&&D.draggableDayEvent(t,e,n),n.isEnd&&T(t)&&D.resizableDayEvent(t,e,n),F(t,e)}var D=this;D.renderDayEvents=function(t,e){var r=n(t,!1,!0);ct(r,function(t,e){H(t.event,e)}),y(r,e),ct(r,function(t,e){M("eventAfterRender",t.event,t.event,e)})},D.draggableDayEvent=function(t,e){var n,r=$();e.draggable({delay:50,opacity:b("dragOpacity"),revertDuration:b("dragRevertDuration"),start:function(a,o){M("eventDragStart",e,t,a,o),N(t,e),r.start(function(r,a,o,i){if(e.draggable("option","revert",!r||!o&&!i),Z(),r){var s=K(a),c=K(r);n=h(c,s),U(l(d(t.start),n),l(C(t),n))}else n=0},a,"drag")},stop:function(a,o){r.stop(),Z(),M("eventDragStop",e,t,a,o),n?z(this,t,n,0,t.allDay,a,o):(e.css("filter",""),R(t,e))}})},D.resizableDayEvent=function(n,r,a){var o=b("isRTL")?"w":"e",i=r.find(".ui-resizable-"+o),s=!1;B(r),r.mousedown(function(t){t.preventDefault()}).click(function(t){s&&(t.preventDefault(),t.stopImmediatePropagation())}),i.mousedown(function(i){if(1==i.which){s=!0;var c,u,f=$(),d=(A(),O(),r.css("top")),v=t.extend({},n),h=rt(nt(n.start));G(),t("body").css("cursor",o+"-resize").one("mouseup",function(e){M("eventResizeStop",this,n,e),t("body").css("cursor",""),f.stop(),Z(),c&&W(this,n,c,0,e),setTimeout(function(){s=!1},0)}),M("eventResizeStart",this,n,i),f.start(function(r,i){if(r){var s=tt(i),f=tt(r);if(f=Math.max(f,h),c=et(f)-et(s)){v.end=l(k(n),c,!0);var g=u;u=e(v,a.row,d),(u=t(u)).find("*").css("cursor",o+"-resize"),g&&g.remove(),N(n)}else u&&(R(n),u.remove(),u=null);Z(),U(n.start,l(C(n),c))}},i)}})};var b=D.opt,M=D.trigger,S=D.isEventDraggable,T=D.isEventResizable,k=D.eventEnd,H=D.reportEventElement,F=D.eventElementHandlers,R=D.showEvents,N=D.hideEvents,z=D.eventDrop,W=D.eventResize,A=D.getRowCnt,O=D.getColCnt,_=(D.getColWidth,D.allDayRow),P=D.colLeft,j=D.colRight,q=D.colContentLeft,X=D.colContentRight,J=(D.dateToCell,D.getDaySegmentContainer),V=D.calendar.formatDates,U=D.renderDayOverlay,Z=D.clearOverlays,G=D.clearSelection,$=D.getHoverListener,Q=D.rangeToSegments,K=D.cellToDate,tt=D.cellToCellOffset,et=D.cellOffsetToDayOffset,nt=D.dateToDayOffset,rt=D.dayOffsetToCellOffset}function lt(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(r.leftCol<=t.rightCol&&r.rightCol>=t.leftCol)return!0}return!1}function ct(t,e){for(var n=0;n<t.length;n++){var r=t[n],a=r.element;a&&e(r,a,n)}}function ut(t,e){return e.rightCol-e.leftCol-(t.rightCol-t.leftCol)||e.event.allDay-t.event.allDay||t.event.start-e.event.start||(t.event.title||"").localeCompare(e.event.title)}function ft(){function e(t){c&&(c=!1,l(),o("unselect",null,t))}function n(t,e,n,r){c=!0,o("select",null,t,e,n,r)}var r=this;r.select=function(t,r,a){e(),r||(r=i(t,a)),s(t,r,a),n(t,r,a)},r.unselect=e,r.reportSelection=n,r.daySelectionMousedown=function(o){var i=r.cellToDate,c=r.getIsCellAllDay,u=r.getHoverListener(),f=r.reportDayClick;if(1==o.which&&a("selectable")){e(o);var d;u.start(function(t,e){l(),t&&c(t)?(d=[i(e),i(t)].sort(O),s(d[0],d[1],!0)):d=null},o),t(document).one("mouseup",function(t){u.stop(),d&&(+d[0]==+d[1]&&f(d[0],!0,t),n(d[0],d[1],!0,t))})}};var a=r.opt,o=r.trigger,i=r.defaultSelectionEnd,s=r.renderSelection,l=r.clearSelection,c=!1;a("selectable")&&a("unselectAuto")&&t(document).mousedown(function(n){var r=a("unselectCancel");r&&t(n.target).parents(r).length||e(n)})}function dt(){var e=this;e.renderOverlay=function(e,a){var o=r.shift();return o||(o=t("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),o[0].parentNode!=a[0]&&o.appendTo(a),n.push(o.css(e).show()),o},e.clearOverlays=function(){for(var t;t=n.shift();)r.push(t.hide().unbind())};var n=[],r=[]}function vt(t){var e,n,r=this;r.build=function(){t(e=[],n=[])},r.cell=function(t,r){var a,o=e.length,i=n.length,s=-1,l=-1;for(a=0;a<o;a++)if(r>=e[a][0]&&r<e[a][1]){s=a;break}for(a=0;a<i;a++)if(t>=n[a][0]&&t<n[a][1]){l=a;break}return s>=0&&l>=0?{row:s,col:l}:null},r.rect=function(t,r,a,o,i){var s=i.offset();return{top:e[t][0]-s.top,left:n[r][0]-s.left,width:n[o][1]-n[r][0],height:e[a][1]-e[t][0]}}}function ht(e){function n(t){gt(t);var n=e.cell(t.pageX,t.pageY);(!n!=!i||n&&(n.row!=i.row||n.col!=i.col))&&(n?(o||(o=n),a(n,o,n.row-o.row,n.col-o.col)):a(n,o),i=n)}var r,a,o,i,s=this;s.start=function(s,l,c){a=s,o=i=null,e.build(),n(l),r=c||"mousemove",t(document).bind(r,n)},s.stop=function(){return t(document).unbind(r,n),i}}function gt(t){t.pageX===e&&(t.pageX=t.originalEvent.pageX,t.pageY=t.originalEvent.pageY)}function pt(t){function n(e){return a[e]=a[e]||t(e)}var r=this,a={},o={},i={};r.left=function(t){return o[t]=o[t]===e?n(t).position().left:o[t]},r.right=function(t){return i[t]=i[t]===e?r.left(t)+n(t).width():i[t]},r.clear=function(){a={},o={},i={}}}var mt={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '—'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"<span class='fc-text-arrow'>‹</span>",next:"<span class='fc-text-arrow'>›</span>",prevYear:"<span class='fc-text-arrow'>«</span>",nextYear:"<span class='fc-text-arrow'>»</span>",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*",handleWindowResize:!0},yt={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>›</span>",next:"<span class='fc-text-arrow'>‹</span>",prevYear:"<span class='fc-text-arrow'>»</span>",nextYear:"<span class='fc-text-arrow'>«</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},wt=t.fullCalendar={version:"1.6.4"},Dt=wt.views={};t.fn.fullCalendar=function(n){if("string"==typeof n){var a,o=Array.prototype.slice.call(arguments,1);return this.each(function(){var r=t.data(this,"fullCalendar");if(r&&t.isFunction(r[n])){var i=r[n].apply(r,o);a===e&&(a=i),"destroy"==n&&t.removeData(this,"fullCalendar")}}),a!==e?a:this}var i=(n=n||{}).eventSources||[];return delete n.eventSources,n.events&&(i.push(n.events),delete n.events),n=t.extend(!0,{},mt,n.isRTL||n.isRTL===e&&mt.isRTL?yt:{},n),this.each(function(e,a){var o=t(a),s=new r(o,n,i);o.data("fullCalendar",s),s.render()}),this},wt.sourceNormalizers=[],wt.sourceFetchers=[];var bt={dataType:"json",cache:!1},Ct=1;wt.addDays=l,wt.cloneDate=d,wt.parseDate=p,wt.parseISO8601=m,wt.parseTime=y,wt.formatDate=w,wt.formatDates=D;var Mt=["sun","mon","tue","wed","thu","fri","sat"],Et=864e5,St=36e5,Tt=6e4,xt={s:function(t){return t.getSeconds()},ss:function(t){return _(t.getSeconds())},m:function(t){return t.getMinutes()},mm:function(t){return _(t.getMinutes())},h:function(t){return t.getHours()%12||12},hh:function(t){return _(t.getHours()%12||12)},H:function(t){return t.getHours()},HH:function(t){return _(t.getHours())},d:function(t){return t.getDate()},dd:function(t){return _(t.getDate())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return t.getMonth()+1},MM:function(t){return _(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},yy:function(t){return(t.getFullYear()+"").substring(2)},yyyy:function(t){return t.getFullYear()},t:function(t){return t.getHours()<12?"a":"p"},tt:function(t){return t.getHours()<12?"am":"pm"},T:function(t){return t.getHours()<12?"A":"P"},TT:function(t){return t.getHours()<12?"AM":"PM"},u:function(t){return w(t,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(t){var e=t.getDate();return e>10&&e<20?"th":["st","nd","rd"][e%10-1]||"th"},w:function(t,e){return e.weekNumberCalculation(t)},W:function(t){return b(t)}};wt.dateFormatters=xt,wt.applyAll=q,Dt.month=function(t,e){var n=this;n.render=function(t,e){e&&(s(t,e),t.setDate(1));var u=r("firstDay"),f=d(t,!0);f.setDate(1);var v=s(d(f),1),g=d(f);l(g,-(g.getDay()-u+7)%7),o(g);var p=d(v);l(p,(7-p.getDay()+u)%7),o(p,-1,!0);var m=i(),y=Math.round(h(p,g)/7);"fixed"==r("weekMode")&&(l(p,7*(6-y)),y=6),n.title=c(f,r("titleFormat")),n.start=f,n.end=v,n.visStart=g,n.visEnd=p,a(y,m,!0)},J.call(n,t,e,"month");var r=n.opt,a=n.renderBasic,o=n.skipHiddenDays,i=n.getCellsPerWeek,c=e.formatDate},Dt.basicWeek=function(t,e){var n=this;n.render=function(t,e){e&&l(t,7*e);var c=l(d(t),-(t.getDay()-r("firstDay")+7)%7),u=l(d(c),7),f=d(c);o(f);var v=d(u);o(v,-1,!0);var h=i();n.start=c,n.end=u,n.visStart=f,n.visEnd=v,n.title=s(f,l(d(v),-1),r("titleFormat")),a(1,h,!1)},J.call(n,t,e,"basicWeek");var r=n.opt,a=n.renderBasic,o=n.skipHiddenDays,i=n.getCellsPerWeek,s=e.formatDates},Dt.basicDay=function(t,e){var n=this;n.render=function(t,e){e&&l(t,e),o(t,e<0?-1:1);var s=d(t,!0),c=l(d(s),1);n.title=i(t,r("titleFormat")),n.start=n.visStart=s,n.end=n.visEnd=c,a(1,1,!1)},J.call(n,t,e,"basicDay");var r=n.opt,a=n.renderBasic,o=n.skipHiddenDays,i=e.formatDate},n({weekMode:"fixed"}),Dt.agendaWeek=function(t,e){var n=this;n.render=function(t,e){e&&l(t,7*e);var c=l(d(t),-(t.getDay()-r("firstDay")+7)%7),u=l(d(c),7),f=d(c);o(f);var v=d(u);o(v,-1,!0);var h=i();n.title=s(f,l(d(v),-1),r("titleFormat")),n.start=c,n.end=u,n.visStart=f,n.visEnd=v,a(h)},U.call(n,t,e,"agendaWeek");var r=n.opt,a=n.renderAgenda,o=n.skipHiddenDays,i=n.getCellsPerWeek,s=e.formatDates},Dt.agendaDay=function(t,e){var n=this;n.render=function(t,e){e&&l(t,e),o(t,e<0?-1:1);var s=d(t,!0),c=l(d(s),1);n.title=i(t,r("titleFormat")),n.start=n.visStart=s,n.end=n.visEnd=c,a(1)},U.call(n,t,e,"agendaDay");var r=n.opt,a=n.renderAgenda,o=n.skipHiddenDays,i=e.formatDate},n({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24,slotEventOverlap:!0})}(jQuery);